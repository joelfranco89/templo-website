<% include header.ejs %>

<div class="container">
    <div class="row">
        <div class="col-sm-12 col-md-8 col-lg-9">
            <% if (kneePainResults.length < 31){ %>
                <% for (var i = 0; i < kneePainResults.length; i++){ %>
                    <div class="card mb-2">
                        <div class="card-header">
                            <a href="/question/<%=kneePainResults[i].id%>" class="text-dark"> <%= kneePainResults[i].question.charAt(0).toUpperCase() + kneePainResults[i].question.slice(1) %></a>
                        </div>
                        <div class="card-body pb-0" style="font-size: 13px;">
                             <p><%=kneePainResults[i].answers.length%> answers&nbsp; <span><%=kneePainResults[i].views%> views &nbsp;<i class="far fa-thumbs-up"></i>&nbsp;<%= kneePainResults[i].helpful %>&nbsp;&nbsp;<i class="far fa-thumbs-down"></i>&nbsp;<%= kneePainResults[i].notHelpful %></span></p> 
                        </div>
                    </div>                   
                <% } %>
            <% }else{ %>
                <% for (var i = 0; i < 30; i++ ){ %>
                    <div class="card mb-2">
                        <div class="card-header">
                            <a href="/question/<%=kneePainResults[i].id%>" class="text-dark"> <%= kneePainResults[i].question.charAt(0).toUpperCase() + kneePainResults[i].question.slice(1) %></a>
                        </div>
                        <div class="card-body pb-0" style="font-size: 13px;">
                            <p><%=kneePainResults[i].answers.length%> answers&nbsp; <span><%=kneePainResults[i].views%> views &nbsp;<i class="far fa-thumbs-up"></i>&nbsp;<%= kneePainResults[i].helpful %>&nbsp;&nbsp;<i class="far fa-thumbs-down"></i>&nbsp;<%= kneePainResults[i].notHelpful %></span></p> 
                        </div>
                    </div>  
                <% } %>
            <% } %>
        </div>


        <div class="col-sm-12 col-md-4 col-lg-3">
            <% if (kneePainResults.length < 6){ %>
                    <div class="list-group-item">
                        <h6 style="font-size: 13px;">Most Answered Questions</h6>
                        <hr>
                        <% var sortedAnsweredArray = kneePainResults.sort(function(a, b){ %>
                        <% return b.answers.length-a.answers.length; %>
                        <% }) %>
                        <% for (i = 0; i < sortedAnsweredArray.length; i++){ %>
                        <a href="/question/<%= sortedAnsweredArray[i]._id %>"><p class="text-dark mb-0" style="font-size: 13px;"><%= sortedAnsweredArray[i].question.charAt(0).toUpperCase() + sortedAnsweredArray[i].question.slice(1)%></p></a>
                        <br>
                        <% } %>
                    </div>

                    <br>

                    <div class="list-group-item">
                            <h6 style="font-size: 13px;">Top Viewed Questions</h6>
                            <hr>
                            <% var sortedViewsArray = kneePainResults.sort(function(a, b){ %>
                            <% return b.views-a.views; %>
                            <% }) %>
                            <% for (i = 0; i < sortedViewsArray.length; i++){ %>
                              <a href="/question/<%= sortedViewsArray[i]._id %>"><p class="text-dark mb-0" style="font-size: 13px;"><%= sortedViewsArray[i].question.charAt(0).toUpperCase() + sortedViewsArray[i].question.slice(1)%></p></a>
                              <br>
                            <% } %>
                          </div>

                    <br>

                    <div class="list-group-item">
                            <h6 style="font-size: 13px;">Most Helpful</h6>
                            <hr>
                            <% var sortedHelpfulArray = kneePainResults.sort(function(a, b){ %>
                            <% return b.helpful-a.helpful; %>
                            <% }) %>
                            <% for (i = 0; i < sortedHelpfulArray.length; i++){ %>
                            <a href="/question/<%= sortedHelpfulArray[i]._id %>"><p class="text-dark mb-0" style="font-size: 13px;"><%= sortedHelpfulArray[i].question.charAt(0).toUpperCase() + sortedHelpfulArray[i].question.slice(1)%></p></a>
                            <br>
                            <% } %>
                          </div>

                    <br>

                    <div class="list-group-item">
                            <h6 style="font-size: 13px;">Least Helpful</h6>
                            <hr>
                            <% var sortedNotHelpfulArray = kneePainResults.sort(function(a, b){ %>
                            <% return b.notHelpful-a.notHelpful; %>
                            <% }) %>
                            <% for (i = 0; i < sortedHelpfulArray.length; i++){ %>
                            <a href="/question/<%= sortedNotHelpfulArray[i]._id %>"><p class="text-dark mb-0" style="font-size: 13px;"><%= sortedNotHelpfulArray[i].question.charAt(0).toUpperCase() + sortedNotHelpfulArray[i].question.slice(1)%></p></a>
                            <br>
                            <% } %>
                          </div>

            <% }else{ %>

                <div class="list-group-item">
                        <h6 style="font-size: 13px;">Most Answered Questions</h6>
                        <hr>
                        <% var sortedAnsweredArray = kneePainResults.sort(function(a, b){ %>
                        <% return b.answers.length-a.answers.length; %>
                        <% }) %>
                        <% for (i = 0; i < 5; i++){ %>
                        <a href="/question/<%= sortedAnsweredArray[i]._id %>"><p class="text-dark mb-0" style="font-size: 13px;"><%= sortedAnsweredArray[i].question.charAt(0).toUpperCase() + sortedAnsweredArray[i].question.slice(1)%></p></a>
                        <br>
                        <% } %>
                </div>

                <br>

                <div class="list-group-item">
                        <h6 style="font-size: 13px;">Top Viewed Questions</h6>
                        <hr>
                        <% var sortedViewsArray = kneePainResults.sort(function(a, b){ %>
                        <% return b.views-a.views; %>
                        <% }) %>
                        <% for (i = 0; i < 5; i++){ %>
                          <a href="/question/<%= sortedViewsArray[i]._id %>"><p class="text-dark mb-0" style="font-size: 13px;"><%= sortedViewsArray[i].question.charAt(0).toUpperCase() + sortedViewsArray[i].question.slice(1)%></p></a>
                          <br>
                        <% } %>
                      </div>

                      <br>

                      <div class="list-group-item">
                            <h6 style="font-size: 13px;">Most Helpful</h6>
                            <hr>
                            <% var sortedHelpfulArray = kneePainResults.sort(function(a, b){ %>
                            <% return b.helpful-a.helpful; %>
                            <% }) %>
                            <% for (i = 0; i < 5; i++){ %>
                            <a href="/question/<%= sortedHelpfulArray[i]._id %>"><p class="text-dark mb-0" style="font-size: 13px;"><%= sortedHelpfulArray[i].question.charAt(0).toUpperCase() + sortedHelpfulArray[i].question.slice(1)%></p></a>
                            <br>
                            <% } %>
                          </div>

                        <br>

                        <div class="list-group-item">
                                <h6 style="font-size: 13px;">Least Helpful</h6>
                                <hr>
                                <% var sortedNotHelpfulArray = kneePainResults.sort(function(a, b){ %>
                                <% return b.notHelpful-a.notHelpful; %>
                                <% }) %>
                                <% for (i = 0; i < 5; i++){ %>
                                <a href="/question/<%= sortedNotHelpfulArray[i]._id %>"><p class="text-dark mb-0" style="font-size: 13px;"><%= sortedNotHelpfulArray[i].question.charAt(0).toUpperCase() + sortedNotHelpfulArray[i].question.slice(1)%></p></a>
                                <br>
                                <% } %>
                              </div>
            <% } %>
        </div>
    </div>
</div>

<% include footer %>