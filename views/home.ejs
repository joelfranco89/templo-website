<% include header.ejs %>

<link href="css/home.css" rel="stylesheet">


<div class="container">
  <% if (!currentUser){ %>
   <div class="jumbotron" style="margin-top: 5rem">
    <h1 class="display-4">Welcome!</h1>
    <p class="lead"><i>Join the growing community of people sharing their physical and mental pain</i></p>
    <hr class="my-4">
    <p><i>No more googling symptons. No more wasted time at the doctors office.</i></p>
    <p class="lead">
    <a class="btn btn-danger btn-lg" href="#" role="button">Learn more</a>
    </p>
  </div>
</div>
  <% }else{ %>
  <div class="jumbotron" style="margin-top: 5rem">
    <p class="lead">What are your symptons? Finally find answers from people with the same issues from around the world!</p>
  </div>
  <% } %>


  <% if (!currentUser){ %>
  <div class="container text-center">
  <% }else{ %>
  <div class="container text-center" style="margin-top: 80px;">    
  <% } %>
    
    
  <div class="row">
    <div class="col-lg-9">    
          <% var sortedQuestionsArray = questions.sort(function(a, b){ %>
          <% return b.views-a.views; %>
          <% }) %>
          <div class="list-group">
          <% for (i = 0; i < sortedQuestionsArray.length; i++) { %>        
            <a href="/question/<%= sortedQuestionsArray[i]._id %>" class="list-group-item list-group-item-action">
              <div class="row"> 
                <div class="col-md-6">       
                  <h3><%= sortedQuestionsArray[i].question %></h3>
                </div>           
           <div class="col-md-6">     
           <div class="row">
            <div class="col-sm-3">
              <div class="row">
                <div class="col-sm-12 ">
                  <div class="badge"><%= sortedQuestionsArray[i].answers.length %></div>
                </div>
                <div class="col-sm-12">
                  answered
                </div>
              </div>
            </div>
            <div class="col-sm-3">
              <div class="row">
                <div class="col-sm-12 ">
                  <div class="badge"><%= sortedQuestionsArray[i].views %></div>
                </div>
                <div class="col-sm-12">
                  views
                </div>
              </div>
            </div>
            <div class="col-sm-3">
              <div class="row">
                <div class="col-sm-12 ">
                  <div class="badge"><%= sortedQuestionsArray[i].helpful %></div>
                </div>
                <div class="col-sm-12">
                  <div><i class="far fa-thumbs-up"></i></div>
                </div>
              </div>
            </div>
            <div class="col-sm-3">
              <div class="row">
                <div class="col-sm-12 ">
                  <div class="badge"><%= sortedQuestionsArray[i].notHelpful %></div>
                </div>
                <div class="col-sm-12">
                  <div><i class="far fa-thumbs-down"></i></div>
                </div>
              </div>
            </div>
           </div>  
           <div class="row" style="margin-top: 10px;">
            <div class="col-md-12">
              <div class="badge badge-dark float-right">
                <p> <strong>Posted:</strong><%= sortedQuestionsArray[i].dateCreated %></p>
              </div>
            </div>
           </div>             
           </div>
           </div>
            </a>
          
      <% } %>
      </div> <!-- List group ends -->
    </div>
    
    
    
    <div class="col-lg-3"> 
      <div class="list-group-item">
        <h6>Most Answered Questions</h6>
        <hr>
        <% var sortedAnsweredArray = questions.sort(function(a, b){ %>
        <% return b.answerCount-a.answerCount; %>
        <% }) %>
        <% for (i = 0; i < sortedAnsweredArray.length; i++){ %>
        <a href="/question/<%= sortedAnsweredArray[i]._id %>"><p class="text-dark"><%= sortedAnsweredArray[i].question%></p></a>
        <% } %>
      </div>
      
      <br>
      
      <div class="list-group-item">
        <h6>Top Viewed Questions</h6>
        <hr>
        <% var sortedViewsArray = questions.sort(function(a, b){ %>
        <% return b.views-a.views; %>
        <% }) %>
        <% for (i = 0; i < sortedViewsArray.length; i++){ %>
          <a href="/question/<%= sortedViewsArray[i]._id %>"><p class="text-dark"><%= sortedViewsArray[i].question%></p></a>
        <% } %>
      </div>
      
      <br>
      
      
      <div class="list-group-item">
        <h6>Most helpful</h6>
        <hr>
        <% var sortedHelpfulArray = questions.sort(function(a, b){ %>
        <% return b.helpful-a.helpful; %>
        <% }) %>
        <% for (i = 0; i < sortedHelpfulArray.length; i++){ %>
        <a href="/question/<%= sortedHelpfulArray[i]._id %>"><p class="text-dark"><%= sortedHelpfulArray[i].question%></p></a>
        <% } %>
      </div>
      
      
      <br>  
      
      
      <div class="list-group-item">
        <h6>Least helpful</h6>
        <hr>
        <% var sortedNotHelpfulArray = questions.sort(function(a, b){ %>
        <% return b.notHelpful-a.notHelpful; %>
        <% }) %>
        <% for (i = 0; i < sortedNotHelpfulArray.length; i++){ %>
        <a href="/question/<%= sortedNotHelpfulArray[i]._id %>"><p class="text-dark"><%= sortedNotHelpfulArray[i].question%></p></a>
        <% } %>
      </div>
      
      
      <br>
      
      
      </div>
  </div>
</div>
</div>
  
  


<% include footer.ejs %>